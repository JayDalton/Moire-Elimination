<Page
    x:Class="ChartInUWP.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ChartInUWP"
    xmlns:canvas="using:Microsoft.Graphics.Canvas.UI.Xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.TopAppBar>
        <CommandBar>
            <AppBarToggleButton Icon="OpenFile" Label="load DICOM" Click="{x:Bind viewModel.LoadDicomFile_Click}" />
            <AppBarToggleButton Icon="OpenLocal" Label="load Chart" Click="{x:Bind viewModel.LoadChartData_Click}" />
            <CommandBar.Content>
                <TextBlock Text="Now viewing..." Margin="12,14"/>
            </CommandBar.Content>
        </CommandBar>
    </Page.TopAppBar>

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

        <Grid x:Name="GreyImageGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" x:Name="DicomImageView"/>
                <ColumnDefinition Width="auto" x:Name="GraphSlider"/>
                <ColumnDefinition Width="*" x:Name="DicomGraphView"/>
            </Grid.ColumnDefinitions>

            <Image 
                Grid.Column="0" Stretch="Uniform"
                Source="{x:Bind viewModel.ImageSource, Mode=OneWay}"/>

            <ProgressRing 
                Grid.Column="0" Width="80" Height="80"
                IsActive="{x:Bind viewModel.ImageProgressing, Mode=OneWay}"/>

            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Button 
                    Grid.Row="0" Click="GraphMoveYDecrease_Click" HorizontalAlignment="Stretch">
                    <TextBlock Text="&#xE70E;" FontFamily="Segoe MDL2 Assets"/>
                </Button>

                <Slider 
                    Grid.Row="1" Header="Lines" Margin="0, 10"
                    Value="{x:Bind viewModel.ChartMoveRowSlider, Mode=TwoWay}"
                    Orientation="Vertical" IsDirectionReversed="True"/>

                <Button 
                    Grid.Row="2" Click="GraphMoveYIncrease_Click" HorizontalAlignment="Stretch">
                    <TextBlock Text="&#xE70D;" FontFamily="Segoe MDL2 Assets"/>
                </Button>
            </Grid>

            <canvas:CanvasControl 
                x:Name="GraphCanvas" Grid.Column="2" Margin="5"
                Draw="{x:Bind viewModel.RenderChartCanvas, Mode=OneWay}"/>

            <ProgressRing 
                Grid.Column="2" Width="80" Height="80"
                IsActive="{x:Bind viewModel.ChartProgressing, Mode=OneWay}"/>

        </Grid>

    </Grid>
</Page>
